# Space Ranger

This tool lets you see a one dimension line or two dimensional grid representation of a segment of a designspace. The contents of the grid are responsive to changes you make in RoboFont, DesignSpaceEditor, Prepolator and other glyph editing extensions.

Enter some text in the text field at the top of the window and it will be shown in the view. *(Tip: `/?` works to show the "current" glyph just like it does in Space Center.)*

If you want to make the contents of the view larger or smaller, do one of these:

- Hit the vertical arrows to fit the height of the view contents to the view.
- Hit the horizontal arrows to fit the width of the view contents to the view.
- Click inside the view and use the standard *pinch-to-zoom* gesture.
- Click inside the view and use the standard *command-space-drag* to do an "animated zoom."
- Click inside the view and use the `command -` and `command +` key commands.

In the view, if you see a source you want to edit, double click it. Also in the view, if you want to see information about an instance, hold down the option key and hover over the instance.

If you don't like the default layout, hit the settings button and change the settings.

## Settings

There are a lot of settings.

### Text

**Suffix** Suffixes can be automatically applied to glyph names, just like in Space Center.

### Display

**Discrete Location** The discrete location to use in the view.

**Apply Rules** The rules defined in the designspace can be automatically applied.

**Apply Kerning** Kerning can be displayed.

**X Axis** The name of the axis to use for the x axis in the grid.

**Mode** The column generation mode. There are three options:
- Count: A specific number of columns. The minimum location will be the axis' minimum value and the maximum location will be the axis' maximum value. Intermediate locations will be in even increments. Enter the number in the text field below the mode options.
- Locations: Specific locations along the axis. Enter the space delimited axis locations in the text field below the mode options. *‌(Tip: extrapolation is allowed.)*
- Instances: The axis locations of all instances defined in the designspace.

**Widths** The columns can be fit to their content or they can all have the same width.

**Y Axis** The name of the axis to use for the y axis in the grid.

**Mode** The row generation mode. There are three options:
- Count: A specific number of rows. The minimum location will be the axis' minimum value and the maximum location will be the axis' maximum value. Intermediate locations will be in even increments. Enter the number in the text field below the mode options.
- Locations: Specific locations along the axis. Enter the space delimited axis locations in the text field below the mode options. *‌(Tip: extrapolation is allowed.)*
- Instances: The axis locations of all instances defined in the designspace.

**Sources**

- Insert: Sources can be automatically inserted into the grid in addition to the items generated by the column and row settings.
- Highlight: Sources can be highlighted in the grid.

**Instances**

- Insert: Instances can be automatically inserted into the grid in addition to the items generated by the column and row settings.
- Highlight: Instances can be highlighted in the grid.

### Pre-Process

Pre-processing can be applied to sources. Currently only one is available:

**Run Prepolator** If you have the *Prepolator 2* extension installed, Prepolator can try to automatically maintain interpolation compatibility by setting contour order, contour direction and start point location. **Note: This will change your sources and automatically save the changes to the UFO file.**

### Post-Process

Post-processing can be applied to the interpolations shown in the grid. Currently only one is available:

**Unsmooths**

This test will find all the points marked as smooth in the source at the default location and then check the corresponding points in the interpolations to see if they are just shy of being smooth by calculating the angles of the points. The intensity of the concern of the algorithm will be shown as the opacity of the indicator in the view.

- Unsmooth Threshold: This allows you to adjust the range of what should be considered smooth/unsmooth.
- Auto-Smooth Default: This will use the very reliable [GuessSmoothPointPen](https://github.com/fonttools/fonttools/blob/main/Lib/fontTools/pens/pointPen.py) to determine which points in the source should be considered smooth. This will not make any changes to your source glyph.

*Note: the algorithm used in this test is still in development.*

## Scripting API

The following functions are available for scripts and other extensions to use.

- `OpenSpaceRanger` Open a Space Ranger for a UFOOperator, font or designspace path.
- `setText` Set the text in a Space Ranger corresponding to a UFOOperator or font.
- `getWindowSettings` Get the window settings in a Space Ranger corresponding to a UFOOperator or font.
- `setWindowSettings` Set the window settings in a Space Ranger corresponding to a UFOOperator or font.

For full documentation, run this script:

```python
import inspect
import spaceranger

functionNames = """
OpenSpaceRanger
setText
getWindowSettings
setWindowSettings
""".strip().splitlines()

for functionName in functionNames:
    function = getattr(spaceranger, functionName)
    signature = f"spaceranger.{functionName}{inspect.signature(function)}"
    print(signature)
    print("-" * len(signature))
    print(inspect.getdoc(function))
    print()
    print()
```

### Example: Open a Space Ranger.

```python
import spaceranger

spaceranger.OpenSpaceRanger(ufoOperator=CurrentDesignspace())
```

### Example: Setting the text.

```python
import spaceranger

spaceranger.setText("ABC", font=CurrentFont())
```

### Example: Getting the available window settings.

```python
import spaceranger

settings = spaceranger.getWindowSettings(ufoOperator=CurrentDesignspace())

for key, value in settings.items():
    print(key, value)
```

### Example: Setting the window settings.

```python
import spaceranger

settings = dict(
    xAxisMode="instances",
    yAxisMode="count",
    yAxisCount=2
)

spaceranger.setWindowSettings(settings, ufoOperator=CurrentDesignspace())
```